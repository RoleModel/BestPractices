<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Centralized Logging | RoleModel Software Best Practices</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Centralized Logging" />
<meta name="author" content="Ben Wyrosdick" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Logging to a central server is done through syslog. We are using papertrail to host our logs." />
<meta property="og:description" content="Logging to a central server is done through syslog. We are using papertrail to host our logs." />
<link rel="canonical" href="https://rolemodel.design/devops/2015/06/05/centralized-logging.html" />
<meta property="og:url" content="https://rolemodel.design/devops/2015/06/05/centralized-logging.html" />
<meta property="og:site_name" content="RoleModel Software Best Practices" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-06-05T04:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Centralized Logging" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ben Wyrosdick"},"dateModified":"2015-06-05T04:00:00+00:00","datePublished":"2015-06-05T04:00:00+00:00","description":"Logging to a central server is done through syslog. We are using papertrail to host our logs.","headline":"Centralized Logging","mainEntityOfPage":{"@type":"WebPage","@id":"https://rolemodel.design/devops/2015/06/05/centralized-logging.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://rolemodel.design/assets/images/logo.svg"},"name":"Ben Wyrosdick"},"url":"https://rolemodel.design/devops/2015/06/05/centralized-logging.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body class="app-with-sidebar"><div id="sidebar-menu" class="sidebar-primary sidebar--drawer sidebar--mobile-friendly">
  <div class="sidebar-menu-button-container">
    <span class="sidebar-menu-button material-symbols-outlined icon--x-large">close</span>
  </div>
  <a class="sidebar__brand" href="/">
    <img src="/assets/images/logo.svg">
  </a>

  <div class="sidebar__content sidebar__content--start">
    <div class="sidebar__section-title">Introduction</div>
    <a class="sidebar__item " href="/">
      <span class="material-symbols-outlined sidebar__item-icon" title="home">home</span>
      <div class="sidebar__item-label">Home</div>
    </a><a class="sidebar__item "
      href="/about/">
      <span class="material-symbols-outlined sidebar__item-icon" title="info">info</span>
      <div class="sidebar__item-label">About</div>
    </a><a class="sidebar__item " href="/all-posts">
      <span class="material-symbols-outlined sidebar__item-icon" title="feed">feed</span>
      <div class="sidebar__item-label">All Posts</div>
    </a>

    <div class="sidebar__section-title">Topics</div>
    <a class="sidebar__item "
      href="/rails/">
      <span class="material-symbols-outlined sidebar__item-icon" title="train">train</span>
      <div class="sidebar__item-label">Rails</div>
    </a><a class="sidebar__item "
      href="/git/">
      <span class="material-symbols-outlined sidebar__item-icon" title="code">code</span>
      <div class="sidebar__item-label">Git</div>
    </a><a class="sidebar__item "
      href="/patterns/">
      <span class="material-symbols-outlined sidebar__item-icon" title="texture">texture</span>
      <div class="sidebar__item-label">Patterns</div>
    </a><a class="sidebar__item "
      href="/support/">
      <span class="material-symbols-outlined sidebar__item-icon" title="support_agent">support_agent</span>
      <div class="sidebar__item-label">Support</div>
    </a><a class="sidebar__item active"
      href="/devops/">
      <span class="material-symbols-outlined sidebar__item-icon" title="dns">dns</span>
      <div class="sidebar__item-label">DevOps</div>
    </a><a class="sidebar__item "
      href="/presentations/">
      <span class="material-symbols-outlined sidebar__item-icon" title="co_present">co_present</span>
      <div class="sidebar__item-label">Presentations</div>
    </a><a class="sidebar__item "
      href="/testing/">
      <span class="material-symbols-outlined sidebar__item-icon" title="bug_report">bug_report</span>
      <div class="sidebar__item-label">Testing</div>
    </a></div>
</div>
<div id="app-body" class="app-body"><header class="app__header" role="banner">
  <div class="app__header-navigation">
    <span class="sidebar-menu-button material-symbols-outlined icon--x-large">menu</span>
  </div>
  <div class="app__header-title">
    <span>RoleModel Software Best Practices</span>
  </div>
  <div class="app__header-actions"></div>
</header>
<div class="app__content">
      <div class="post-body">
  <article class="card margin-y-md full-width" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="card__header">
      <h1 class='post-title' itemprop="name headline">Centralized Logging</h1>
      <div class="post-meta"><time class="post-meta__date" datetime="2015-06-05T04:00:00+00:00" itemprop="datePublished">Jun 5, 2015
        </time><p class="post-meta__data">Author: Ben Wyrosdick</p><p class="post-meta__data">Approver: Caleb Woods</p></div>
    </header>

    <div class="card__body" itemprop="articleBody">
      <p>Logging to a central server is done through <em>syslog</em>. We are using <em>papertrail</em> to host our logs.</p>

<h2 id="application-logging">Application Logging</h2>

<h3 id="heroku">Heroku</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku drains:add syslog://SUBDOMAIN.papertrailapp.com:PORT
</code></pre></div></div>

<h3 id="rails">Rails</h3>

<p>Add <code class="language-plaintext highlighter-rouge">remote_syslog_logger</code> to <code class="language-plaintext highlighter-rouge">:production, :staging</code> group in <code class="language-plaintext highlighter-rouge">Gemfile</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">group</span> <span class="ss">:production</span><span class="p">,</span> <span class="ss">:staging</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'remote_syslog_logger'</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Add logger and log level to <code class="language-plaintext highlighter-rouge">config/environments/production.rb</code> and <code class="language-plaintext highlighter-rouge">config/environments/staging.rb</code></p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">logger</span> <span class="o">=</span> <span class="no">RemoteSyslogLogger</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'SUBDOMAIN.papertrailapp.com'</span><span class="p">,</span> <span class="no">PORT</span><span class="p">,</span> <span class="ss">program: </span><span class="s2">"rails-</span><span class="si">#{</span><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">name</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s1">'::'</span><span class="p">).</span><span class="nf">first</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">config</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">level</span> <span class="o">=</span> <span class="no">Logger</span><span class="o">::</span><span class="no">Severity</span><span class="o">::</span><span class="no">INFO</span>
</code></pre></div></div>

<h2 id="server-logging">Server Logging</h2>

<p>As <code class="language-plaintext highlighter-rouge">root</code> edit <code class="language-plaintext highlighter-rouge">/etc/rsyslog.conf</code>
Add the following line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*.*    @SUBDOMAIN.papertrailapp.com:PORT
</code></pre></div></div>

<p>once you have added that restart the syslog process</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service rsyslog restart
</code></pre></div></div>

<h2 id="checking-logs">Checking logs</h2>

<p>Log into https://papertrailapp.com
Select system
Optionally “Create Group” and select a system filter (or systems individually)</p>

    </div>

    <a class="u-url" href="/devops/2015/06/05/centralized-logging.html" hidden></a>
  </article>

  <div class="table-of-contents">
    <p class="table-of-contents__title">Table of Contents</p>
    <ul id="table-of-contents" class="table-of-contents__nav">
<li class="table-of-contents__item table-of-contents-h2"><a href="#application-logging">Application Logging</a>
<ul class="table-of-contents__sub-nav">
<li class="table-of-contents__item table-of-contents-h3"><a href="#heroku">Heroku</a></li>
<li class="table-of-contents__item table-of-contents-h3"><a href="#rails">Rails</a></li>
</ul>
</li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#server-logging">Server Logging</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#checking-logs">Checking logs</a></li>
</ul>
  </div>
</div>

    </div>
  </div>
</body>

</html>
