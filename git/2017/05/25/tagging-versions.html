<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
  <script src="/assets/js/main.js"></script>
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Tagging Versions | RoleModel Software Best Practices</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Tagging Versions" />
<meta name="author" content="Jeff Terrell" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Or, how to capture relevant information about deployments." />
<meta property="og:description" content="Or, how to capture relevant information about deployments." />
<link rel="canonical" href="https://rolemodel.design/git/2017/05/25/tagging-versions.html" />
<meta property="og:url" content="https://rolemodel.design/git/2017/05/25/tagging-versions.html" />
<meta property="og:site_name" content="RoleModel Software Best Practices" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-05-25T04:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tagging Versions" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jeff Terrell"},"dateModified":"2017-05-25T04:00:00+00:00","datePublished":"2017-05-25T04:00:00+00:00","description":"Or, how to capture relevant information about deployments.","headline":"Tagging Versions","mainEntityOfPage":{"@type":"WebPage","@id":"https://rolemodel.design/git/2017/05/25/tagging-versions.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://rolemodel.design/assets/images/logo.svg"},"name":"Jeff Terrell"},"url":"https://rolemodel.design/git/2017/05/25/tagging-versions.html"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body class="app-with-sidebar"><div id="sidebar-menu" class="sidebar-primary sidebar--drawer sidebar--mobile-friendly">
  <div class="sidebar-menu-button-container">
    <span class="sidebar-menu-button material-symbols-outlined icon--x-large">close</span>
  </div>
  <a class="sidebar__brand" href="/">
    <img src="/assets/images/logo.svg">
  </a>

  <div class="sidebar__content sidebar__content--start">
    <div class="sidebar__section-title">Introduction</div>
    <a class="sidebar__item " href="/">
      <span class="material-symbols-outlined sidebar__item-icon" title="home">home</span>
      <div class="sidebar__item-label">Home</div>
    </a><a class="sidebar__item "
      href="/about/">
      <span class="material-symbols-outlined sidebar__item-icon" title="info">info</span>
      <div class="sidebar__item-label">About</div>
    </a><a class="sidebar__item " href="/all-posts">
      <span class="material-symbols-outlined sidebar__item-icon" title="feed">feed</span>
      <div class="sidebar__item-label">All Posts</div>
    </a>

    <div class="sidebar__section-title">Topics</div>
    <a class="sidebar__item "
      href="/rails/">
      <span class="material-symbols-outlined sidebar__item-icon" title="train">train</span>
      <div class="sidebar__item-label">Rails</div>
    </a><a class="sidebar__item active"
      href="/git/">
      <span class="material-symbols-outlined sidebar__item-icon" title="code">code</span>
      <div class="sidebar__item-label">Git</div>
    </a><a class="sidebar__item "
      href="/patterns/">
      <span class="material-symbols-outlined sidebar__item-icon" title="texture">texture</span>
      <div class="sidebar__item-label">Patterns</div>
    </a><a class="sidebar__item "
      href="/support/">
      <span class="material-symbols-outlined sidebar__item-icon" title="support_agent">support_agent</span>
      <div class="sidebar__item-label">Support</div>
    </a><a class="sidebar__item "
      href="/devops/">
      <span class="material-symbols-outlined sidebar__item-icon" title="dns">dns</span>
      <div class="sidebar__item-label">DevOps</div>
    </a><a class="sidebar__item "
      href="/presentations/">
      <span class="material-symbols-outlined sidebar__item-icon" title="co_present">co_present</span>
      <div class="sidebar__item-label">Presentations</div>
    </a><a class="sidebar__item "
      href="/testing/">
      <span class="material-symbols-outlined sidebar__item-icon" title="bug_report">bug_report</span>
      <div class="sidebar__item-label">Testing</div>
    </a></div>
</div>
<div id="app-body" class="app-body"><header class="app__header" role="banner">
  <div class="app__header-navigation">
    <span class="sidebar-menu-button material-symbols-outlined icon--x-large">menu</span>
  </div>
  <div class="app__header-title">
    <span>RoleModel Software Best Practices</span>
  </div>
  <div class="app__header-actions"></div>
</header>
<div class="app__content">
      <div class="post-body">
  <article class="card margin-y-md full-width" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="card__header">
      <h1 class='post-title' itemprop="name headline">Tagging Versions</h1>
      <div class="post-meta"><time class="post-meta__date" datetime="2017-05-25T04:00:00+00:00" itemprop="datePublished">May 25, 2017
        </time><p class="post-meta__data">Author: Jeff Terrell</p><p class="post-meta__data">Approver: Caleb Woods</p></div>
    </header>

    <div class="card__body" itemprop="articleBody">
      <p>Or, how to capture relevant information about deployments.</p>

<p><a name="rationale"></a></p>
<h2 id="0-rationale">0. Rationale</h2>

<p>Without a plan, production deployments will happen and information about what
was deployed will be scattered in various places. Hotfixes can add more
complexity and confusion. The need almost invariably arises for a specific
accounting of what was deployed. To that end, I propose the following best
practice.</p>

<p><a name="levels"></a></p>
<h2 id="1-levels-of-information">1. Levels of information</h2>

<p>Git already records commits, which include a summary message by the developer
making the change. This level of information—both the actual files and lines
changed as well as the summary messages—are the ground-level truth of what
changed. It should be possible to easily list the commits specific to a version.</p>

<p>The customer typically does not care about this level of information. Instead,
customers track things at the level of tasks and features. Such features are
typically tracked in Trello or another project management tool as “cards” (or
similar). Cards have an associated identifying number. These card numbers should
be explicitly listed in the information about a deployment using the process
described below.</p>

<p><a name="versions"></a></p>
<h2 id="2-versions">2. Versions</h2>

<p>Each deployment should have a version number associated with it. There is a
one-to-one relationship between deployments and versions.</p>

<p>The craftsman overseeing a project should decide on a versioning scheme for the
project. One such scheme is described here and used throughout this document,
but others (such as a date-based one) are also acceptable, and may be better in
some cases.</p>

<p>For purposes of illustration in this document, we will use version numbers of
the form <code class="language-plaintext highlighter-rouge">major.minor.patch</code>, e.g. <code class="language-plaintext highlighter-rouge">2.4.1</code>, where the patch is optional and, if
not specified, defined to be <code class="language-plaintext highlighter-rouge">0</code> (so <code class="language-plaintext highlighter-rouge">2.4</code> is a sort of shorthand for <code class="language-plaintext highlighter-rouge">2.4.0</code>).
Each regularly scheduled deployment, referred to as a regular deployment, should
result in a new minor version number. In most cases, the minor version number
should be incremented. When the project craftsman deems the new version to be
especially significant, the major version number should be incremented and the
minor version should be reset to 0.</p>

<p>(Note: this approach is similar to, but intentionally different
from, <a href="http://semver.org/">Semantic Versioning</a>, which is a ubiquitous version
numbering scheme more suitable for libraries. The projects targeted by this best
practice document are never included as a dependency of another project.)</p>

<p>A “hotfix” occurs when a bug was deployed to production or if, for some other
reason, a change needs to be deployed outside of the regular schedule. Hotfixes
should increment the patch number. Each new regular deployment should reset the
patch number to <code class="language-plaintext highlighter-rouge">0</code>.</p>

<p><a name="tagging"></a></p>
<h2 id="3-tagging-versions">3. Tagging versions</h2>

<p>Git supports tags, which are names associated with a specific commit. These tags
may be annotated with a message and sync’d between remotes (e.g. pushed up to
<code class="language-plaintext highlighter-rouge">origin</code>).</p>

<p>Each version should be tagged with a tag whose name is <code class="language-plaintext highlighter-rouge">v&lt;version&gt;</code>, e.g.
<code class="language-plaintext highlighter-rouge">v2.4.1</code>. The tag should be annotated with a message that includes the version
number, a summary if applicable, and a list of the card numbers and card titles
introduced by this version. The cards should be sorted by number. Here is an
example message for a tag named <code class="language-plaintext highlighter-rouge">v2.4.1</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Version 2.4.1

Hotfix to fix a typo and fix a permission

Includes the following cards from the Trello board:
- #144 - Correct misspelling of "mispelled"
- #145 - Blacklist new spammers
</code></pre></div></div>

<p>When creating a tag with <code class="language-plaintext highlighter-rouge">git tag</code>, use the <code class="language-plaintext highlighter-rouge">-a</code> option to create an annotated
tag (i.e. one with a message). When the tag is created, be sure to push the tag
to the server with <code class="language-plaintext highlighter-rouge">git push --tags</code>.</p>

<p><a name="deployment"></a></p>
<h2 id="4-tagging-a-deployment">4. Tagging a deployment</h2>

<p>Assuming your project follows
the <a href="release-branching">Release based Branching Strategy</a> best practice,
tagging a deployment is simple, whether it’s a regular deployment or a hotfix.
As soon as the release branch or hotfix is merged into master, tag the latest
commit on master, like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git tag -a &lt;tagname&gt; master
</code></pre></div></div>

<p>For <code class="language-plaintext highlighter-rouge">&lt;tagname&gt;</code>, use the new version number, as detailed in
<a href="#versions">Section 2</a>. To find the most recent version number (so you
can know what the new one should be), use these commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch --tags  # ensure you have all tag names locally
git tag -l | grep '^v' | sort -t. -k1,1n -k2,2n -k3,3n | tail -n1
</code></pre></div></div>

<p><a name="information"></a></p>
<h2 id="5-gathering-information">5. Gathering information</h2>

<p><a href="#levels">Section 1</a> described two levels of information: git commits
and customer-visible tasks. Using the process described in this document,
gathering such information is straightforward.</p>

<p>To get a list of commits between two versions <code class="language-plaintext highlighter-rouge">v1.0</code> and <code class="language-plaintext highlighter-rouge">v1.1</code>, you can use the
git syntax <code class="language-plaintext highlighter-rouge">v1.0..v1.1</code>. You can pass this to, for example, <code class="language-plaintext highlighter-rouge">git log</code>, <code class="language-plaintext highlighter-rouge">git log
--oneline</code>, or even <code class="language-plaintext highlighter-rouge">git diff</code>.</p>

<p>To get a list of cards in version <code class="language-plaintext highlighter-rouge">v1.1</code>, just view the tag’s message with
<code class="language-plaintext highlighter-rouge">git show v1.1</code>.</p>

    </div>

    <a class="u-url" href="/git/2017/05/25/tagging-versions.html" hidden></a>
  </article>

  <div class="table-of-contents">
    <p class="table-of-contents__title">Table of Contents</p>
    <ul id="table-of-contents" class="table-of-contents__nav">
<li class="table-of-contents__item table-of-contents-h2"><a href="#0-rationale">0. Rationale</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#1-levels-of-information">1. Levels of information</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#2-versions">2. Versions</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#3-tagging-versions">3. Tagging versions</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#4-tagging-a-deployment">4. Tagging a deployment</a></li>
<li class="table-of-contents__item table-of-contents-h2"><a href="#5-gathering-information">5. Gathering information</a></li>
</ul>
  </div>
</div>

    </div>
  </div>
</body>

</html>
